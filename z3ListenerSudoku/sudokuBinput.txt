
; declare fields
(declare-fun b (Int Int) Int)

; unique per row
(assert (distinct (b 1 1) (b 1 2) (b 1 3) (b 1 4) (b 1 5) (b 1 6) (b 1 7) (b 1 8) (b 1 9)))
(assert (distinct (b 2 1) (b 2 2) (b 2 3) (b 2 4) (b 2 5) (b 2 6) (b 2 7) (b 2 8) (b 2 9)))
(assert (distinct (b 3 1) (b 3 2) (b 3 3) (b 3 4) (b 3 5) (b 3 6) (b 3 7) (b 3 8) (b 3 9)))
(assert (distinct (b 4 1) (b 4 2) (b 4 3) (b 4 4) (b 4 5) (b 4 6) (b 4 7) (b 4 8) (b 4 9)))
(assert (distinct (b 5 1) (b 5 2) (b 5 3) (b 5 4) (b 5 5) (b 5 6) (b 5 7) (b 5 8) (b 5 9)))
(assert (distinct (b 6 1) (b 6 2) (b 6 3) (b 6 4) (b 6 5) (b 6 6) (b 6 7) (b 6 8) (b 6 9)))
(assert (distinct (b 7 1) (b 7 2) (b 7 3) (b 7 4) (b 7 5) (b 7 6) (b 7 7) (b 7 8) (b 7 9)))
(assert (distinct (b 8 1) (b 8 2) (b 8 3) (b 8 4) (b 8 5) (b 8 6) (b 8 7) (b 8 8) (b 8 9)))
(assert (distinct (b 9 1) (b 9 2) (b 9 3) (b 9 4) (b 9 5) (b 9 6) (b 9 7) (b 9 8) (b 9 9)))

; unique per column
(assert (distinct (b 1 1) (b 1 2) (b 1 3) (b 1 4) (b 1 5) (b 1 6) (b 1 7) (b 1 8) (b 1 9)))
(assert (distinct (b 2 1) (b 2 2) (b 2 3) (b 2 4) (b 2 5) (b 2 6) (b 2 7) (b 2 8) (b 2 9)))
(assert (distinct (b 3 1) (b 3 2) (b 3 3) (b 3 4) (b 3 5) (b 3 6) (b 3 7) (b 3 8) (b 3 9)))
(assert (distinct (b 4 1) (b 4 2) (b 4 3) (b 4 4) (b 4 5) (b 4 6) (b 4 7) (b 4 8) (b 4 9)))
(assert (distinct (b 5 1) (b 5 2) (b 5 3) (b 5 4) (b 5 5) (b 5 6) (b 5 7) (b 5 8) (b 5 9)))
(assert (distinct (b 6 1) (b 6 2) (b 6 3) (b 6 4) (b 6 5) (b 6 6) (b 6 7) (b 6 8) (b 6 9)))
(assert (distinct (b 7 1) (b 7 2) (b 7 3) (b 7 4) (b 7 5) (b 7 6) (b 7 7) (b 7 8) (b 7 9)))
(assert (distinct (b 8 1) (b 8 2) (b 8 3) (b 8 4) (b 8 5) (b 8 6) (b 8 7) (b 8 8) (b 8 9)))
(assert (distinct (b 9 1) (b 9 2) (b 9 3) (b 9 4) (b 9 5) (b 9 6) (b 9 7) (b 9 8) (b 9 9)))

; limit to 1..9
(assert (and (>= (b 1 1) 1) (<= (b 1 1) 9)))
(assert (and (>= (b 1 2) 1) (<= (b 1 2) 9)))
(assert (and (>= (b 1 3) 1) (<= (b 1 3) 9)))
(assert (and (>= (b 1 4) 1) (<= (b 1 4) 9)))
(assert (and (>= (b 1 5) 1) (<= (b 1 5) 9)))
(assert (and (>= (b 1 6) 1) (<= (b 1 6) 9)))
(assert (and (>= (b 1 7) 1) (<= (b 1 7) 9)))
(assert (and (>= (b 1 8) 1) (<= (b 1 8) 9)))
(assert (and (>= (b 1 9) 1) (<= (b 1 9) 9)))
(assert (and (>= (b 2 1) 1) (<= (b 2 1) 9)))
(assert (and (>= (b 2 2) 1) (<= (b 2 2) 9)))
(assert (and (>= (b 2 3) 1) (<= (b 2 3) 9)))
(assert (and (>= (b 2 4) 1) (<= (b 2 4) 9)))
(assert (and (>= (b 2 5) 1) (<= (b 2 5) 9)))
(assert (and (>= (b 2 6) 1) (<= (b 2 6) 9)))
(assert (and (>= (b 2 7) 1) (<= (b 2 7) 9)))
(assert (and (>= (b 2 8) 1) (<= (b 2 8) 9)))
(assert (and (>= (b 2 9) 1) (<= (b 2 9) 9)))
(assert (and (>= (b 3 1) 1) (<= (b 3 1) 9)))
(assert (and (>= (b 3 2) 1) (<= (b 3 2) 9)))
(assert (and (>= (b 3 3) 1) (<= (b 3 3) 9)))
(assert (and (>= (b 3 4) 1) (<= (b 3 4) 9)))
(assert (and (>= (b 3 5) 1) (<= (b 3 5) 9)))
(assert (and (>= (b 3 6) 1) (<= (b 3 6) 9)))
(assert (and (>= (b 3 7) 1) (<= (b 3 7) 9)))
(assert (and (>= (b 3 8) 1) (<= (b 3 8) 9)))
(assert (and (>= (b 3 9) 1) (<= (b 3 9) 9)))
(assert (and (>= (b 4 1) 1) (<= (b 4 1) 9)))
(assert (and (>= (b 4 2) 1) (<= (b 4 2) 9)))
(assert (and (>= (b 4 3) 1) (<= (b 4 3) 9)))
(assert (and (>= (b 4 4) 1) (<= (b 4 4) 9)))
(assert (and (>= (b 4 5) 1) (<= (b 4 5) 9)))
(assert (and (>= (b 4 6) 1) (<= (b 4 6) 9)))
(assert (and (>= (b 4 7) 1) (<= (b 4 7) 9)))
(assert (and (>= (b 4 8) 1) (<= (b 4 8) 9)))
(assert (and (>= (b 4 9) 1) (<= (b 4 9) 9)))
(assert (and (>= (b 5 1) 1) (<= (b 5 1) 9)))
(assert (and (>= (b 5 2) 1) (<= (b 5 2) 9)))
(assert (and (>= (b 5 3) 1) (<= (b 5 3) 9)))
(assert (and (>= (b 5 4) 1) (<= (b 5 4) 9)))
(assert (and (>= (b 5 5) 1) (<= (b 5 5) 9)))
(assert (and (>= (b 5 6) 1) (<= (b 5 6) 9)))
(assert (and (>= (b 5 7) 1) (<= (b 5 7) 9)))
(assert (and (>= (b 5 8) 1) (<= (b 5 8) 9)))
(assert (and (>= (b 5 9) 1) (<= (b 5 9) 9)))
(assert (and (>= (b 6 1) 1) (<= (b 6 1) 9)))
(assert (and (>= (b 6 2) 1) (<= (b 6 2) 9)))
(assert (and (>= (b 6 3) 1) (<= (b 6 3) 9)))
(assert (and (>= (b 6 4) 1) (<= (b 6 4) 9)))
(assert (and (>= (b 6 5) 1) (<= (b 6 5) 9)))
(assert (and (>= (b 6 6) 1) (<= (b 6 6) 9)))
(assert (and (>= (b 6 7) 1) (<= (b 6 7) 9)))
(assert (and (>= (b 6 8) 1) (<= (b 6 8) 9)))
(assert (and (>= (b 6 9) 1) (<= (b 6 9) 9)))
(assert (and (>= (b 7 1) 1) (<= (b 7 1) 9)))
(assert (and (>= (b 7 2) 1) (<= (b 7 2) 9)))
(assert (and (>= (b 7 3) 1) (<= (b 7 3) 9)))
(assert (and (>= (b 7 4) 1) (<= (b 7 4) 9)))
(assert (and (>= (b 7 5) 1) (<= (b 7 5) 9)))
(assert (and (>= (b 7 6) 1) (<= (b 7 6) 9)))
(assert (and (>= (b 7 7) 1) (<= (b 7 7) 9)))
(assert (and (>= (b 7 8) 1) (<= (b 7 8) 9)))
(assert (and (>= (b 7 9) 1) (<= (b 7 9) 9)))
(assert (and (>= (b 8 1) 1) (<= (b 8 1) 9)))
(assert (and (>= (b 8 2) 1) (<= (b 8 2) 9)))
(assert (and (>= (b 8 3) 1) (<= (b 8 3) 9)))
(assert (and (>= (b 8 4) 1) (<= (b 8 4) 9)))
(assert (and (>= (b 8 5) 1) (<= (b 8 5) 9)))
(assert (and (>= (b 8 6) 1) (<= (b 8 6) 9)))
(assert (and (>= (b 8 7) 1) (<= (b 8 7) 9)))
(assert (and (>= (b 8 8) 1) (<= (b 8 8) 9)))
(assert (and (>= (b 8 9) 1) (<= (b 8 9) 9)))
(assert (and (>= (b 9 1) 1) (<= (b 9 1) 9)))
(assert (and (>= (b 9 2) 1) (<= (b 9 2) 9)))
(assert (and (>= (b 9 3) 1) (<= (b 9 3) 9)))
(assert (and (>= (b 9 4) 1) (<= (b 9 4) 9)))
(assert (and (>= (b 9 5) 1) (<= (b 9 5) 9)))
(assert (and (>= (b 9 6) 1) (<= (b 9 6) 9)))
(assert (and (>= (b 9 7) 1) (<= (b 9 7) 9)))
(assert (and (>= (b 9 8) 1) (<= (b 9 8) 9)))
(assert (and (>= (b 9 9) 1) (<= (b 9 9) 9)))

; unique per box
(assert (distinct (b 1 1) (b 1 2) (b 1 3) (b 2 1) (b 2 2) (b 2 3) (b 3 1) (b 3 2) (b 3 3)))
(assert (distinct (b 1 4) (b 1 5) (b 1 6) (b 2 4) (b 2 5) (b 2 6) (b 3 4) (b 3 5) (b 3 6)))
(assert (distinct (b 1 7) (b 1 8) (b 1 9) (b 2 7) (b 2 8) (b 2 9) (b 3 7) (b 3 8) (b 3 9)))
(assert (distinct (b 4 1) (b 4 2) (b 4 3) (b 5 1) (b 5 2) (b 5 3) (b 6 1) (b 6 2) (b 6 3)))
(assert (distinct (b 4 4) (b 4 5) (b 4 6) (b 5 4) (b 5 5) (b 5 6) (b 6 4) (b 6 5) (b 6 6)))
(assert (distinct (b 4 7) (b 4 8) (b 4 9) (b 5 7) (b 5 8) (b 5 9) (b 6 7) (b 6 8) (b 6 9)))
(assert (distinct (b 7 1) (b 7 2) (b 7 3) (b 8 1) (b 8 2) (b 8 3) (b 9 1) (b 9 2) (b 9 3)))
(assert (distinct (b 7 4) (b 7 5) (b 7 6) (b 8 4) (b 8 5) (b 8 6) (b 9 4) (b 9 5) (b 9 6)))
(assert (distinct (b 7 7) (b 7 8) (b 7 9) (b 8 7) (b 8 8) (b 8 9) (b 9 7) (b 9 8) (b 9 9)))

; instance to solve
(assert (= (b 1 7) 8))
(assert (= (b 2 1) 4))
(assert (= (b 2 4) 2))
(assert (= (b 2 5) 8))
(assert (= (b 2 9) 6))
(assert (= (b 3 6) 7))
(assert (= (b 3 8) 3))
(assert (= (b 4 3) 6))
(assert (= (b 4 6) 3))
(assert (= (b 4 8) 2))
(assert (= (b 4 9) 1))
(assert (= (b 5 1) 5))
(assert (= (b 5 2) 4))
(assert (= (b 5 5) 1))
(assert (= (b 5 8) 7))
(assert (= (b 5 9) 8))
(assert (= (b 6 1) 1))
(assert (= (b 6 2) 2))
(assert (= (b 6 4) 5))
(assert (= (b 6 7) 6))
(assert (= (b 7 2) 7))
(assert (= (b 7 4) 3))
(assert (= (b 8 1) 3))
(assert (= (b 8 5) 6))
(assert (= (b 8 6) 1))
(assert (= (b 8 9) 4))
(assert (= (b 9 3) 5))
; ***********
; * 4  51 3 *
; *    427  *
; *   6    5*
; * 2   53  *
; * 8  1  6 *
; *  73   1 *
; *8    6   *
; *  327    *
; * 6 18  4 *
; ***********

; solving...
(check-sat)
(get-model)
